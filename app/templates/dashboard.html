
{% extends "base.html" %}

{% block page_title %}
<div class="row">
  <div class="col-md-6">
    <h2 class="display-4 pb-2">Projects</h2>
    </div>
    

</div>
{% endblock %}

{% block app_content %}

  <div class="row">
  {% if has_projects %}
    {% for n in range((projects.all() | length)+1) %}
    <!-- <div class="numberCircle">{{ n+1 }}</div> -->
    {% if n == (projects.all() | length) %}
    <div class="col-lg-4 col-md-6">
    <div class="text-center">
        <a href="/new_project/" class='btn btn-outline-primary btn-large ml-5 m-5'>+ new project</a>
    </div>
    </div>
    {% else %}
    <div class="col-lg-4 col-md-6 my-1">
      <div class="border rounded project-box">
          
          <div class="d-flex flex-column justify-content-around m-2">
            <div class="">
                <a  href="/project/{{projects[n].title}}">
                  <h4 class="d-inline text-primary">{{ projects[n].title }}</h3>
                  <!-- <img class="d-inline ml-5 mb-2 seethrough" src="https://image.flaticon.com/icons/svg/148/148993.svg" height="27" width="30">-->
                </a>
            </div>
            <div class="pt-1">
              <p class="block-with-text text-muted">{{ projects[n].description }}</p>
            </div>
            <div class="align-bottom">
              <small><p class="text-muted text-right align-bottom mt-auto" id="last_updated{{n}}">  
              </p> </small>
              <script> $("#last_updated{{n}}").text("Updated " + moment("{{projects[n].last_timestamp.strftime('%d%m%y%H%M%S') }}", "DDMMYYhhmmss").fromNow()); </script> 
            </div>
          </div>
          
        </div>
      </div>
  {% endif %}
  {% endfor %}

  {% else %}
    <h4>Let's get to work. <a href="/new_project/">Start a new project!</a></h4>
  {% endif %}

  </div>

{% endblock %}
